<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© - Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .consultation-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 2rem;
            margin: 1rem;
            color: white;
            transition: all 0.3s ease;
        }
        
        .consultation-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .chat-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            space-y: 1rem;
        }
        
        .chat-input-area {
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding: 1rem;
            display: flex;
            gap: 1rem;
        }
        
        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 12px;
            padding: 1rem;
            color: white;
            resize: none;
        }
        
        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }
        
        .chat-input:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 20px rgba(79, 172, 254, 0.3);
        }
        
        .send-btn {
            background: #4facfe;
            border: none;
            border-radius: 12px;
            padding: 1rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .send-btn:hover {
            background: #3b82f6;
            transform: scale(1.05);
        }
        
        .message {
            margin-bottom: 1rem;
            padding: 1rem;
            border-radius: 12px;
            max-width: 80%;
        }
        
        .message.user {
            background: #4facfe;
            margin-left: auto;
            text-align: right;
        }
        
        .message.bot {
            background: rgba(255, 255, 255, 0.2);
            margin-right: auto;
            text-align: left;
        }
        
        .message-time {
            font-size: 0.7rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }
        
        .quick-questions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .question-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .question-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.02);
        }
        
        .question-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
            opacity: 0.7;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .consultation-history {
            max-height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }
        
        .history-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .history-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="p-6 text-center">
        <h1 class="text-4xl font-bold text-white mb-2">ğŸ’¬ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø©</h1>
        <p class="text-white opacity-90">Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø·Ø¨ÙŠØ© Ø³Ø±ÙŠØ¹Ø© ÙˆÙ…ÙˆØ«ÙˆÙ‚Ø©</p>
    </div>

    <!-- Main Content -->
    <div class="container mx-auto px-6">
        <div class="grid lg:grid-cols-3 gap-6">
            <!-- Chat Section -->
            <div class="lg:col-span-2">
                <div class="consultation-card">
                    <h2 class="text-2xl font-bold mb-4">ğŸ¤– Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ</h2>
                    <div class="chat-container">
                        <div id="chatMessages" class="chat-messages">
                            <div class="message bot">
                                <div>Ù…Ø±Ø­Ø¨Ø§Ù‹! Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯Ùƒ Ø§Ù„Ø·Ø¨ÙŠ Ø§Ù„Ø°ÙƒÙŠ. ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ø³ØªÙØ³Ø§Ø±Ø§ØªÙƒ Ø§Ù„Ø·Ø¨ÙŠØ© Ø§Ù„Ø¨Ø³ÙŠØ·Ø© ÙˆØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø¹Ø§Ù…Ø©.</div>
                                <div class="message-time">${new Date().toLocaleTimeString('ar-EG')}</div>
                            </div>
                        </div>
                        <div class="chat-input-area">
                            <textarea id="messageInput" class="chat-input" rows="2" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..."></textarea>
                            <button onclick="sendMessage()" class="send-btn">
                                <span class="text-xl">ğŸ“¤</span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Questions -->
                <div class="consultation-card">
                    <h2 class="text-2xl font-bold mb-4">â“ Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©</h2>
                    <div class="quick-questions">
                        <div class="question-card" onclick="askQuickQuestion('Ù…Ø§ Ù‡ÙŠ Ø£Ø¹Ø±Ø§Ø¶ Ù†Ø²Ù„Ø© Ø§Ù„Ø¨Ø±Ø¯ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©ØŸ')">
                            <div class="question-icon">ğŸ¤§</div>
                            <h3 class="font-bold mb-2">Ø£Ø¹Ø±Ø§Ø¶ Ù†Ø²Ù„Ø© Ø§Ù„Ø¨Ø±Ø¯</h3>
                            <p class="text-sm opacity-90">Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„Ù…Ø¨ÙƒØ±Ø© Ù„Ù„Ø¥ØµØ§Ø¨Ø© Ø¨Ù†Ø²Ù„Ø© Ø§Ù„Ø¨Ø±Ø¯ØŸ</p>
                        </div>
                        
                        <div class="question-card" onclick="askQuickQuestion('ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø®ÙØ¶ Ø­Ø±Ø§Ø±Ø© Ø§Ù„Ø¬Ø³Ù…ØŸ')">
                            <div class="question-icon">ğŸŒ¡ï¸</div>
                            <h3 class="font-bold mb-2">Ø®ÙØ¶ Ø§Ù„Ø­Ø±Ø§Ø±Ø©</h3>
                            <p class="text-sm opacity-90">Ø·Ø±Ù‚ ÙØ¹Ø§Ù„Ø© Ù„Ø®ÙØ¶ Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø£Ø·ÙØ§Ù„ ÙˆØ§Ù„ÙƒØ¨Ø§Ø±</p>
                        </div>
                        
                        <div class="question-card" onclick="askQuickQuestion('Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø£Ø·Ø¹Ù…Ø© Ø§Ù„Ù…ÙÙŠØ¯Ø© Ù„Ù„Ù…Ø¹Ø¯Ø©ØŸ')">
                            <div class="question-icon">ğŸ</div>
                            <h3 class="font-bold mb-2">ØµØ­Ø© Ø§Ù„Ù…Ø¹Ø¯Ø©</h3>
                            <p class="text-sm opacity-90">Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø·Ø¹Ù…Ø© Ù„ØµØ­Ø© Ø§Ù„Ø¬Ù‡Ø§Ø² Ø§Ù„Ù‡Ø¶Ù…ÙŠ</p>
                        </div>
                        
                        <div class="question-card" onclick="askQuickQuestion('Ù…ØªÙ‰ ÙŠØ¬Ø¨ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ØŸ')">
                            <div class="question-icon">âš•ï¸</div>
                            <h3 class="font-bold mb-2">Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨</h3>
                            <p class="text-sm opacity-90">Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ ØªØ³ØªÙ„Ø²Ù… Ù…Ø±Ø§Ø¬Ø¹Ø© ÙÙˆØ±ÙŠØ© Ù„Ù„Ø·Ø¨ÙŠØ¨</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div>
                <!-- Consultation History -->
                <div class="consultation-card">
                    <h2 class="text-2xl font-bold mb-4">ğŸ“‹ Ø³Ø¬Ù„ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª</h2>
                    <div id="consultationHistory" class="consultation-history">
                        <div class="text-center opacity-75">
                            <div class="text-4xl mb-2">ğŸ“</div>
                            <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©</p>
                        </div>
                    </div>
                </div>
                
                <!-- Important Notes -->
                <div class="consultation-card">
                    <h2 class="text-2xl font-bold mb-4">âš ï¸ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©</h2>
                    <div class="space-y-3 text-sm">
                        <div class="flex items-start gap-2">
                            <span class="text-red-400">â€¢</span>
                            <span>Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© Ù„Ø§ ØªØºÙ†ÙŠ Ø¹Ù† Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨</span>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="text-red-400">â€¢</span>
                            <span>ÙÙŠ Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ØŒ ØªÙˆØ¬Ù‡ ÙÙˆØ±Ø§Ù‹ Ø¥Ù„Ù‰ Ø£Ù‚Ø±Ø¨ Ù…Ø³ØªØ´ÙÙ‰</span>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="text-red-400">â€¢</span>
                            <span>Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ù‚Ø¯Ù…Ø© Ù‡ÙŠ Ù„Ø£ØºØ±Ø§Ø¶ ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø¹Ø§Ù…Ø© ÙÙ‚Ø·</span>
                        </div>
                        <div class="flex items-start gap-2">
                            <span class="text-blue-400">â€¢</span>
                            <span>Ø§Ø­ÙØ¸ Ø³Ø¬Ù„ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ø­Ø§Ù„ØªÙƒ Ø§Ù„ØµØ­ÙŠØ©</span>
                        </div>
                    </div>
                </div>
                
                <!-- Emergency Contacts -->
                <div class="consultation-card">
                    <h2 class="text-2xl font-bold mb-4">ğŸš¨ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ø·ÙˆØ§Ø±Ø¦</h2>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between items-center">
                            <span>Ø§Ù„Ø¥Ø³Ø¹Ø§Ù</span>
                            <a href="tel:123" class="text-blue-600 font-bold">123</a>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Ø§Ù„Ø¥Ø·ÙØ§Ø¡</span>
                            <a href="tel:180" class="text-red-600 font-bold">180</a>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Ø§Ù„Ø´Ø±Ø·Ø©</span>
                            <a href="tel:122" class="text-green-600 font-bold">122</a>
                        </div>
                        <div class="flex justify-between items-center">
                            <span>Ø§Ù„Ø·Ø¨ Ø§Ù„Ø³Ø§Ù…</span>
                            <a href="tel:126" class="text-purple-600 font-bold">126</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <script src="firebase-config.js"></script>
    <script>
        let consultationHistory = [];
        let currentSessionId = null;

        // Initialize page
        document.addEventListener('DOMContentLoaded', () => {
            generateSessionId();
            loadConsultationHistory();
            setupEventListeners();
        });

        function generateSessionId() {
            currentSessionId = 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function setupEventListeners() {
            const messageInput = document.getElementById('messageInput');
            
            // Send message on Enter key
            messageInput.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
        }

        function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            // Add user message to chat
            addMessage(message, 'user');
            
            // Clear input
            messageInput.value = '';
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate bot response
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateBotResponse(message);
                addMessage(response, 'bot');
                
                // Save to history
                saveToHistory(message, response);
            }, 1500);
        }

        function addMessage(text, sender) {
            const chatMessages = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            messageElement.className = `message ${sender}`;
            
            messageElement.innerHTML = `
                <div>${text}</div>
                <div class="message-time">${new Date().toLocaleTimeString('ar-EG')}</div>
            `;
            
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingElement = document.createElement('div');
            typingElement.id = 'typingIndicator';
            typingElement.className = 'message bot typing-indicator';
            
            typingElement.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <span style="margin-left: 0.5rem;">ÙŠÙƒØªØ¨...</span>
            `;
            
            chatMessages.appendChild(typingElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function generateBotResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            // Common medical questions responses
            if (message.includes('Ù†Ø²Ù„Ø© Ø¨Ø±Ø¯') || message.includes('Ø±Ø´Ø­') || message.includes('Ø²ÙƒØ§Ù…')) {
                return `Ø£Ø¹Ø±Ø§Ø¶ Ù†Ø²Ù„Ø© Ø§Ù„Ø¨Ø±Ø¯ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© ØªØ´Ù…Ù„:
â€¢ Ø³ÙŠÙ„Ø§Ù† Ø§Ù„Ø£Ù†Ù
â€¢ Ø§Ø­ØªÙ‚Ø§Ù† Ø§Ù„Ø£Ù†Ù
â€¢ Ø§Ù„Ø¹Ø·Ø³
â€¢ Ø§Ù„ØªÙ‡Ø§Ø¨ Ø§Ù„Ø­Ù„Ù‚
â€¢ Ø§Ù„Ø³Ø¹Ø§Ù„
â€¢ Ø§Ù„ØµØ¯Ø§Ø¹ Ø§Ù„Ø®ÙÙŠÙ
â€¢ Ø§Ù„Ø­Ù…Ù‰ Ø§Ù„Ù…Ù†Ø®ÙØ¶Ø©

Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø¹Ù„Ø§Ø¬:
â€¢ Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„ÙƒØ§ÙÙŠØ©
â€¢ Ø´Ø±Ø¨ Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ Ø§Ù„Ø¯Ø§ÙØ¦Ø©
â€¢ ØªÙ†Ø§ÙˆÙ„ ÙÙŠØªØ§Ù…ÙŠÙ† C
â€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø®Ø§Ø®Ø§Øª Ø§Ù„Ø£Ù†Ù
â€¢ ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¹Ø±Ø¶ Ù„Ù„Ø¨Ø±Ø¯`;
            }
            
            if (message.includes('Ø­Ø±Ø§Ø±Ø©') || message.includes('Ø­Ù…Ù‰')) {
                return `Ø·Ø±Ù‚ Ø®ÙØ¶ Ø§Ù„Ø­Ø±Ø§Ø±Ø©:

Ù„Ù„Ø¨Ø§Ù„ØºÙŠÙ†:
â€¢ ØªÙ†Ø§ÙˆÙ„ Ø§Ù„Ø¨Ø§Ø±Ø§Ø³ÙŠØªØ§Ù…ÙˆÙ„ Ø£Ùˆ Ø§Ù„Ø¥ÙŠØ¨ÙˆØ¨Ø±ÙˆÙÙŠÙ†
â€¢ Ø´Ø±Ø¨ Ø§Ù„Ø³ÙˆØ§Ø¦Ù„ Ø¨ÙƒØ«Ø±Ø©
â€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ…Ø§Ø¯Ø§Øª Ø¨Ø§Ø±Ø¯Ø©
â€¢ Ø§Ù„Ø±Ø§Ø­Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©

Ù„Ù„Ø£Ø·ÙØ§Ù„:
â€¢ ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø«Ù‚ÙŠÙ„Ø©
â€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ…Ø§Ø¯Ø§Øª ÙØ§ØªØ±Ø© (ÙˆÙ„ÙŠØ³Øª Ø¨Ø§Ø±Ø¯Ø©)
â€¢ Ø¥Ø¹Ø·Ø§Ø¡ Ø®Ø§ÙØ¶ Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø­Ø³Ø¨ Ø§Ù„ÙˆØ²Ù†
â€¢ Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø¨Ø§Ø³ØªÙ…Ø±Ø§Ø±

âš ï¸ Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙÙˆØ±Ø§Ù‹ Ø¥Ø°Ø§:
â€¢ Ø§Ù„Ø­Ø±Ø§Ø±Ø© Ø£Ø¹Ù„Ù‰ Ù…Ù† 39 Ø¯Ø±Ø¬Ø©
â€¢ Ø§Ø³ØªÙ…Ø±Øª Ø£ÙƒØ«Ø± Ù…Ù† 3 Ø£ÙŠØ§Ù…
â€¢ Ù…ØµØ­ÙˆØ¨Ø© Ø¨Ø£Ø¹Ø±Ø§Ø¶ Ø®Ø·ÙŠØ±Ø©`;
            }
            
            if (message.includes('Ù…Ø¹Ø¯Ø©') || message.includes('Ù‡Ø¶Ù…')) {
                return `Ø£ÙØ¶Ù„ Ø§Ù„Ø£Ø·Ø¹Ù…Ø© Ù„ØµØ­Ø© Ø§Ù„Ù…Ø¹Ø¯Ø©:

Ø£Ø·Ø¹Ù…Ø© Ù…ÙÙŠØ¯Ø©:
â€¢ Ø§Ù„Ø²Ø¨Ø§Ø¯ÙŠ (ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨Ø±ÙˆØ¨ÙŠÙˆØªÙŠÙƒ)
â€¢ Ø§Ù„Ø´ÙˆÙØ§Ù† (Ø£Ù„ÙŠØ§Ù Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„Ø°ÙˆØ¨Ø§Ù†)
â€¢ Ø§Ù„Ù…ÙˆØ² (Ù…Ø¶Ø§Ø¯ Ù„Ù„Ø­Ù…ÙˆØ¶Ø©)
â€¢ Ø§Ù„Ø²Ù†Ø¬Ø¨ÙŠÙ„ (Ù…Ø¶Ø§Ø¯ Ù„Ù„Ø§Ù„ØªÙ‡Ø§Ø¨Ø§Øª)
â€¢ Ø§Ù„Ø®Ø¶Ø±ÙˆØ§Øª Ø§Ù„ÙˆØ±Ù‚ÙŠØ©
â€¢ Ø§Ù„Ø³Ù…Ùƒ (Ø£ÙˆÙ…ÙŠØºØ§ 3)

Ù†ØµØ§Ø¦Ø­ Ø¹Ø§Ù…Ø©:
â€¢ ØªÙ†Ø§ÙˆÙ„ ÙˆØ¬Ø¨Ø§Øª ØµØºÙŠØ±Ø© Ù…ØªÙƒØ±Ø±Ø©
â€¢ Ù…Ø¶Øº Ø§Ù„Ø·Ø¹Ø§Ù… Ø¬ÙŠØ¯Ø§Ù‹
â€¢ ØªØ¬Ù†Ø¨ Ø§Ù„Ø£ÙƒÙ„ Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ… Ø¨Ø³Ø§Ø¹ØªÙŠÙ†
â€¢ Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡ Ø¨Ø§Ù†ØªØ¸Ø§Ù…
â€¢ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù…`;
            }
            
            if (message.includes('Ø·Ø¨ÙŠØ¨') || message.includes('Ø¯ÙƒØªÙˆØ±')) {
                return `Ø§Ù„Ø­Ø§Ù„Ø§Øª Ø§Ù„ØªÙŠ ØªØ³ØªÙ„Ø²Ù… Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨ ÙÙˆØ±Ø§Ù‹:

ğŸš¨ Ø­Ø§Ù„Ø§Øª Ø·Ø§Ø±Ø¦Ø©:
â€¢ ØµØ¹ÙˆØ¨Ø© ÙÙŠ Ø§Ù„ØªÙ†ÙØ³
â€¢ Ø£Ù„Ù… ÙÙŠ Ø§Ù„ØµØ¯Ø±
â€¢ Ù†Ø²ÙŠÙ Ø´Ø¯ÙŠØ¯ Ù„Ø§ ÙŠØªÙˆÙ‚Ù
â€¢ ÙÙ‚Ø¯Ø§Ù† Ø§Ù„ÙˆØ¹ÙŠ
â€¢ Ø§Ù„Ø­Ù…Ù‰ Ø£Ø¹Ù„Ù‰ Ù…Ù† 39.5 Ø¯Ø±Ø¬Ø©
â€¢ ØªØ´Ù†Ø¬Ø§Øª Ø£Ùˆ Ù†ÙˆØ¨Ø§Øª

ğŸ©º Ù…Ø±Ø§Ø¬Ø¹Ø© Ø³Ø±ÙŠØ¹Ø©:
â€¢ Ø£Ù„Ù… Ø´Ø¯ÙŠØ¯ Ù…Ø³ØªÙ…Ø±
â€¢ ØªØºÙŠØ±Ø§Øª Ù…ÙØ§Ø¬Ø¦Ø© ÙÙŠ Ø§Ù„Ø±Ø¤ÙŠØ©
â€¢ ØµØ¯Ø§Ø¹ Ø´Ø¯ÙŠØ¯ ØºÙŠØ± Ù…Ø¨Ø±Ø±
â€¢ Ø·ÙØ­ Ø¬Ù„Ø¯ÙŠ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ
â€¢ Ø¥Ø³Ù‡Ø§Ù„ Ø£Ùˆ Ù‚ÙŠØ¡ Ø´Ø¯ÙŠØ¯
â€¢ Ø¬Ø±ÙˆØ­ Ø¹Ù…ÙŠÙ‚Ø©

ğŸ’Š Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø±ÙˆØªÙŠÙ†ÙŠØ©:
â€¢ Ø§Ù„ÙØ­ÙˆØµØ§Øª Ø§Ù„Ø¯ÙˆØ±ÙŠØ©
â€¢ Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø£Ù…Ø±Ø§Ø¶ Ø§Ù„Ù…Ø²Ù…Ù†Ø©
â€¢ ØªØ¬Ø¯ÙŠØ¯ Ø§Ù„ÙˆØµÙØ§Øª Ø§Ù„Ø·Ø¨ÙŠØ©`;
            }
            
            // Default responses for common keywords
            if (message.includes('ØµØ¯Ø§Ø¹')) {
                return `Ù„Ù„ØµØ¯Ø§Ø¹ Ø§Ù„Ø®ÙÙŠÙ:
â€¢ Ø§Ù„Ø±Ø§Ø­Ø© ÙÙŠ Ù…ÙƒØ§Ù† Ù‡Ø§Ø¯Ø¦
â€¢ ÙƒÙ…Ø§Ø¯Ø§Øª Ø¨Ø§Ø±Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø¨Ù‡Ø©
â€¢ Ø´Ø±Ø¨ Ø§Ù„Ù…Ø§Ø¡
â€¢ ØªÙ†Ø§ÙˆÙ„ Ù…Ø³ÙƒÙ† Ø®ÙÙŠÙ

Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¥Ø°Ø§:
â€¢ Ø§Ù„ØµØ¯Ø§Ø¹ Ø´Ø¯ÙŠØ¯ Ø£Ùˆ Ù…ÙØ§Ø¬Ø¦
â€¢ Ù…ØµØ­ÙˆØ¨ Ø¨ØºØ«ÙŠØ§Ù† Ø£Ùˆ Ù‚ÙŠØ¡
â€¢ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø±Ø¤ÙŠØ©
â€¢ Ù…Ø³ØªÙ…Ø± Ù„Ø£ÙƒØ«Ø± Ù…Ù† ÙŠÙˆÙ…ÙŠÙ†`;
            }
            
            if (message.includes('Ø³Ø¹Ø§Ù„')) {
                return `Ù„Ù„Ø³Ø¹Ø§Ù„:
â€¢ Ø´Ø±Ø¨ Ø§Ù„Ø³ÙˆØ§Ù„Ø§Øª Ø§Ù„Ø¯Ø§ÙØ¦Ø©
â€¢ Ø§Ù„Ø¹Ø³Ù„ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ (Ù„Ù„ÙƒØ¨Ø§Ø± ÙÙ‚Ø·)
â€¢ ØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ù‡ÙŠØ¬Ø§Øª
â€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¨Ø®Ø§Ø± Ø§Ù„Ù…Ø§Ø¡

Ø§Ø³ØªØ´Ø± Ø§Ù„Ø·Ø¨ÙŠØ¨ Ø¥Ø°Ø§:
â€¢ Ø§Ù„Ø³Ø¹Ø§Ù„ Ù…Ø³ØªÙ…Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ø£Ø³Ø¨ÙˆØ¹
â€¢ Ù…ØµØ­ÙˆØ¨ Ø¨Ø¨Ù„ØºÙ… Ù…Ù„ÙˆÙ†
â€¢ ÙŠØ³Ø¨Ø¨ Ø¶ÙŠÙ‚ ØªÙ†ÙØ³
â€¢ Ù…ØµØ­ÙˆØ¨ Ø¨Ø­Ø±Ø§Ø±Ø© Ø¹Ø§Ù„ÙŠØ©`;
            }
            
            if (message.includes('Ø§Ù„Ù†ÙˆÙ…')) {
                return `Ù†ØµØ§Ø¦Ø­ Ù„Ù†ÙˆÙ… Ø¬ÙŠØ¯:
â€¢ Ø§Ù†ØªØ¸Ù… ÙÙŠ Ù…ÙˆØ¹Ø¯ Ø§Ù„Ù†ÙˆÙ…
â€¢ ØªØ¬Ù†Ø¨ Ø§Ù„Ø´Ø§Ø´Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ…
â€¢ Ø®Ù„Ù‚ Ø¨ÙŠØ¦Ø© Ù‡Ø§Ø¯Ø¦Ø© Ù…Ø¸Ù„Ù…Ø©
â€¢ ØªØ¬Ù†Ø¨ Ø§Ù„ÙƒØ§ÙÙŠÙŠÙ† Ù…Ø³Ø§Ø¡Ù‹
â€¢ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© Ø¨Ø§Ù†ØªØ¸Ø§Ù…
â€¢ Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„Ø§Ø³ØªØ±Ø®Ø§Ø¡`;
            }
            
            // General health tips
            if (message.includes('ØµØ­Ø©') || message.includes('ÙˆÙ‚Ø§ÙŠØ©')) {
                return `Ù†ØµØ§Ø¦Ø­ Ù„Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ØµØ­Ø©:
â€¢ ØªÙ†Ø§ÙˆÙ„ Ø·Ø¹Ø§Ù… ØµØ­ÙŠ Ù…ØªÙˆØ§Ø²Ù†
â€¢ Ù…Ù…Ø§Ø±Ø³Ø© Ø§Ù„Ø±ÙŠØ§Ø¶Ø© 30 Ø¯Ù‚ÙŠÙ‚Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹
â€¢ Ø§Ù„Ù†ÙˆÙ… 7-8 Ø³Ø§Ø¹Ø§Øª Ù„ÙŠÙ„Ø§Ù‹
â€¢ Ø´Ø±Ø¨ 8 Ø£ÙƒÙˆØ§Ø¨ Ù…Ù† Ø§Ù„Ù…Ø§Ø¡ ÙŠÙˆÙ…ÙŠØ§Ù‹
â€¢ ØªØ¬Ù†Ø¨ Ø§Ù„ØªØ¯Ø®ÙŠÙ† ÙˆØ§Ù„ÙƒØ­ÙˆÙ„
â€¢ Ø¥Ø¬Ø±Ø§Ø¡ ÙØ­ÙˆØµØ§Øª Ø¯ÙˆØ±ÙŠØ©
â€¢ ØºØ³Ù„ Ø§Ù„ÙŠØ¯ÙŠÙ† Ø¨Ø§Ù†ØªØ¸Ø§Ù…`;
            }
            
            // Default response for unrecognized questions
            return `Ø´ÙƒØ±Ø§Ù‹ Ù„Ø³Ø¤Ø§Ù„Ùƒ. Ø£Ù†Ø§ Ù…Ø³Ø§Ø¹Ø¯ Ø·Ø¨ÙŠ Ø°ÙƒÙŠ Ø£Ù‚Ø¯Ù… Ù„Ùƒ Ù†ØµØ§Ø¦Ø­ Ø¹Ø§Ù…Ø© ÙˆØ¥Ø±Ø´Ø§Ø¯Ø§Øª Ø£ÙˆÙ„ÙŠØ©.

âš ï¸ **Ù…Ù‡Ù…**: Ù‡Ø°Ù‡ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù„Ù„Ø£ØºØ±Ø§Ø¶ Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠØ© ÙÙ‚Ø· ÙˆÙ„Ø§ ØªØºÙ†ÙŠ Ø¹Ù† Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø·Ø¨ÙŠØ¨.

Ø¥Ø°Ø§ ÙƒÙ†Øª ØªØ¹Ø§Ù†ÙŠ Ù…Ù† Ø£Ø¹Ø±Ø§Ø¶ Ø®Ø·ÙŠØ±Ø© Ø£Ùˆ Ø­Ø§Ù„Ø© Ø·Ø§Ø±Ø¦Ø©ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„ØªÙˆØ¬Ù‡ ÙÙˆØ±Ø§Ù‹ Ø¥Ù„Ù‰ Ø£Ù‚Ø±Ø¨ Ù…Ø³ØªØ´ÙÙ‰ Ø£Ùˆ Ù…Ø±ÙƒØ² Ø·Ø¨ÙŠ.

Ù‡Ù„ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø´ÙŠØ¡ Ø¢Ø®Ø±ØŸ`;
        }

        function askQuickQuestion(question) {
            // Add user question to chat
            addMessage(question, 'user');
            
            // Show typing indicator
            showTypingIndicator();
            
            // Simulate bot response
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateBotResponse(question);
                addMessage(response, 'bot');
                
                // Save to history
                saveToHistory(question, response);
            }, 1000);
        }

        function saveToHistory(userMessage, botResponse) {
            const consultation = {
                sessionId: currentSessionId,
                userMessage: userMessage,
                botResponse: botResponse,
                timestamp: Date.now(),
                date: new Date().toLocaleDateString('ar-EG'),
                time: new Date().toLocaleTimeString('ar-EG')
            };
            
            // Save to Firebase
            database.ref('consultations').push(consultation)
                .then(() => {
                    consultationHistory.unshift(consultation);
                    displayConsultationHistory();
                })
                .catch((error) => {
                    console.error('Error saving consultation:', error);
                });
        }

        function loadConsultationHistory() {
            // Load last 10 consultations
            database.ref('consultations').limitToLast(10).on('value', (snapshot) => {
                consultationHistory = [];
                snapshot.forEach((child) => {
                    consultationHistory.unshift(child.val());
                });
                displayConsultationHistory();
            });
        }

        function displayConsultationHistory() {
            const container = document.getElementById('consultationHistory');
            
            if (consultationHistory.length === 0) {
                container.innerHTML = `
                    <div class="text-center opacity-75">
                        <div class="text-4xl mb-2">ğŸ“</div>
                        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø³Ø§Ø¨Ù‚Ø©</p>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '';
            
            consultationHistory.slice(0, 5).forEach((consultation, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.onclick = () => loadConsultation(consultation);
                
                const messagePreview = consultation.userMessage.length > 30 ? 
                    consultation.userMessage.substring(0, 30) + '...' : 
                    consultation.userMessage;
                
                historyItem.innerHTML = `
                    <div class="flex justify-between items-start mb-1">
                        <span class="text-sm font-semibold">${messagePreview}</span>
                        <span class="text-xs opacity-75">${consultation.time}</span>
                    </div>
                    <div class="text-xs opacity-60">${consultation.date}</div>
                `;
                
                container.appendChild(historyItem);
            });
        }

        function loadConsultation(consultation) {
            // Clear current chat and load the consultation
            document.getElementById('chatMessages').innerHTML = '';
            
            // Add the consultation messages
            addMessage(consultation.userMessage, 'user');
            addMessage(consultation.botResponse, 'bot');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500' : 
                type === 'error' ? 'bg-red-500' : 
                type === 'warning' ? 'bg-yellow-500' : 'bg-blue-500'
            } text-white`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
    </script>
</body>
</html>